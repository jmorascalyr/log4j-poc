
FROM codenvy/jdk8_maven3_tomcat8

COPY --chown=user:user files /

RUN sudo apt -yq update && sudo apt -yq install python3 netcat vim tcpdump

USER user

WORKDIR /home/user

RUN cd rmi-poc && \
    javac -cp catalina.jar:. RMIServerPOC.java

EXPOSE 22/tcp 
EXPOSE 1097/tcp
EXPOSE 1337/tcp 

CMD ["/entrypoint.sh"]
